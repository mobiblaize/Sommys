(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Rpy1:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("8Y7J"),s=n("lGQG"),i=n("iInd");let a=(()=>{class e{constructor(e,t){this._authService=e,this._router=t}canActivate(){return!!this._authService.loggedIn()||(this._router.navigate(["admin/login"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](s.a),r["\u0275\u0275inject"](i.f))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},jkDv:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return D}));var r=n("SVse"),s=n("s7LF"),i=n("8Y7J");let a=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule]]}),e})();var o=n("iInd"),l=n("IheW"),m=n("4XAN");let d=(()=>{class e{constructor(e,t){this.router=e,this.authService=t,this.user={}}ngOnInit(){this.authService.getProfile().subscribe(e=>{this.user=e},e=>{e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"]),console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.f),i["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-admin"]],decls:7,vars:1,consts:[[1,"section-admin"],[1,"container"],[1,"row","justify-content-center"],[1,"long-copy"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"h2"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"p",3),i["\u0275\u0275text"](6,"Manage sommy's catering from this dashboard. Check the orders tab to view your list of orders and messages to view your users feedback"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" Welcome ",t.user.name,""))},styles:[".section-admin[_ngcontent-%COMP%]{min-height:100vh;background-color:#f4f4f4}"]}),e})();var c=n("/Qy7");let u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-message-item"]],inputs:{message:"message"},decls:20,vars:9,consts:[[1,"row","justify-content-center","mt-4"],[1,"col-sm-12","col-md-10","col-lg-9"],[1,"list-group","pb-2"],[1,"list-group-item","list-group-item-secondary"],[1,"list-group-item"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"ul",2),i["\u0275\u0275elementStart"](3,"li",3),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"li",4),i["\u0275\u0275text"](8,"Email: "),i["\u0275\u0275elementStart"](9,"span"),i["\u0275\u0275text"](10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"li",4),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"li",4),i["\u0275\u0275text"](14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"li",4),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"li",4),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](t.message.name),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](t.message.email),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("Subscriber: ",t.message.news,""),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("Find us: ",t.message.findUs,""),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("Message: ",t.message.message,""),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("Date: ",i["\u0275\u0275pipeBind2"](19,6,t.message.date,"shortDate"),""))},pipes:[r.DatePipe],styles:[".section-admin[_ngcontent-%COMP%]{min-height:100vh;background-color:#f4f4f4}input[type=search][_ngcontent-%COMP%]{width:100%;padding:7px;border-radius:3px;border:1px solid #ccc}"]}),e})();function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275text"](1,"No messages yet"),i["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&i["\u0275\u0275element"](0,"app-message-item",15),2&e&&i["\u0275\u0275property"]("message",t.$implicit)}function h(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().moreMessages()})),i["\u0275\u0275text"](1,"More"),i["\u0275\u0275elementEnd"]()}}let f=(()=>{class e{constructor(e,t,n){this.progress=e,this.router=t,this.authService=n,this.messages=[],this.query="",this.moreBtnActive=!1}ngOnInit(){this.progressRef=this.progress.ref("myProgress"),this.moreBtnActive=!0,this.authService.getMessages({size:this.messages.length}).subscribe(e=>{this.messages=this.messages.concat(e.messages),0==e.messages.length&&(this.moreBtnActive=!1)},e=>{console.log(e),e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"])})}searchMessage(){let e={query:this.query};this.progressRef.start(),this.authService.searchMessages(e).subscribe(e=>{this.messages=e.messages,this.progressRef.complete()},e=>{console.log(e),this.progressRef.complete(),e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"])})}moreMessages(){this.authService.getMessages({size:this.messages.length}).subscribe(e=>{this.messages=this.messages.concat(e.messages),0==e.messages.length&&(this.moreBtnActive=!1)},e=>{console.log(e),e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"])})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](o.f),i["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-messages"]],decls:16,vars:4,consts:[[1,"section-admin"],[1,"container"],["action","/admin/messages/search",1,"search-form"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-10","col-lg-8","col-xl-7"],[1,"row"],[1,"col-sm-12","col-md-10","pr-3"],["type","search","name","term","placeholder","Type sender's name",1,"mb-2",3,"ngModel","ngModelChange"],[1,"col"],["type","submit","value","Search",1,"btn","btn-sm","btn-primary","btn-full",3,"click"],["class","long-copy",4,"ngIf"],[3,"message",4,"ngFor","ngForOf"],[1,"text-center"],["class","btn btn-secondary mt-2",3,"click",4,"ngIf"],[1,"long-copy"],[3,"message"],[1,"btn","btn-secondary","mt-2",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"h2"),i["\u0275\u0275text"](2,"Messages"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"form",2),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275elementStart"](8,"div",6),i["\u0275\u0275elementStart"](9,"input",7),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.query=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",8),i["\u0275\u0275elementStart"](11,"input",9),i["\u0275\u0275listener"]("click",(function(){return t.searchMessage()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,g,2,0,"div",10),i["\u0275\u0275template"](13,p,1,1,"app-message-item",11),i["\u0275\u0275elementStart"](14,"div",12),i["\u0275\u0275template"](15,h,2,0,"button",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.query),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!(t.messages.length>0)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.messages),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.moreBtnActive))},directives:[s.r,s.i,s.j,s.b,s.h,s.k,r.NgIf,r.NgForOf,u],styles:[".section-admin[_ngcontent-%COMP%]{min-height:100vh;background-color:#f4f4f4}input[type=search][_ngcontent-%COMP%]{width:100%;padding:7px;border-radius:3px;border:1px solid #ccc}"]}),e})();var v=n("bvlS");function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275text"](1,"No orders yet"),i["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"div",16),i["\u0275\u0275elementStart"](2,"ul",17),i["\u0275\u0275elementStart"](3,"li",18),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"li",18),i["\u0275\u0275text"](8,"Email: "),i["\u0275\u0275elementStart"](9,"span"),i["\u0275\u0275text"](10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"li",18),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"li",18),i["\u0275\u0275text"](14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"li",18),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"li",18),i["\u0275\u0275text"](18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"li",18),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"li",18),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"form"),i["\u0275\u0275elementStart"](26,"input",19,20),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.index,r=i["\u0275\u0275reference"](27);return i["\u0275\u0275nextContext"]().delivered(n,r)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](3),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.name),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.email),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("Phone: ",e.phone,""),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("Location: ",e.location,""),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("Pastry: ",e.pastry,""),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("Size: ",e.size,""),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("Order date: ",i["\u0275\u0275pipeBind2"](21,26,e.orderDate,"shortDate"),""),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("list-group-item-success",e.delivered),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("Delivery-date: ",i["\u0275\u0275pipeBind2"](24,29,e.deliveryDate,"shortDate"),""),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",e.delivered?"btn-success":"btn-primary")("value",e.delivered?"Delivered":"Pending")}}function y(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",21),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().moreOrders()})),i["\u0275\u0275text"](1,"More"),i["\u0275\u0275elementEnd"]()}}let E=(()=>{class e{constructor(e,t,n,r){this.progress=e,this.router=t,this.flashMessage=n,this.authAdminService=r,this.orders=[],this.query="",this.moreBtnActive=!1}ngOnInit(){this.progressRef=this.progress.ref("myProgress"),this.moreBtnActive=!0,this.authAdminService.getOrders({size:this.orders.length}).subscribe(e=>{this.orders=this.orders.concat(e.orders),0==e.orders.length&&(this.moreBtnActive=!1)},e=>{e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"]),console.log(e)})}searchOrders(){let e={query:this.query};this.progressRef.start(),this.authAdminService.searchOrders(e).subscribe(e=>{this.orders=e.orders,this.progressRef.complete(),this.moreBtnActive=!1},e=>{console.log(e),this.progressRef.complete(),e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"])})}delivered(e,t){let n={id:this.orders[e]._id,delivered:!this.orders[e].delivered};t.disabled=!0,this.progressRef.start(),this.authAdminService.deliverOrder(n).subscribe(n=>{this.orders[e]=n.order,n.order.delivered?this.flashMessage.show("Order status: Delivered",{cssClass:"alert-success mb-0",timeout:1e3}):this.flashMessage.show("Order status: Pending",{cssClass:"alert-secondary mb-0",timeout:1e3}),this.progressRef.complete(),t.disabled=!1},e=>{console.log(e),this.progressRef.complete(),t.disabled=!1,e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"])})}moreOrders(){this.authAdminService.getOrders({size:this.orders.length}).subscribe(e=>{this.orders=this.orders.concat(e.orders),0==e.orders.length&&(this.moreBtnActive=!1)},e=>{console.log(e),e instanceof l.d&&401===e.status&&this.router.navigate(["/admin/login"])})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](o.f),i["\u0275\u0275directiveInject"](v.FlashMessagesService),i["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-orders"]],decls:16,vars:4,consts:[[1,"section-admin"],[1,"container"],["action","/admin/messages/search",1,"search-form"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-10","col-lg-8","col-xl-7"],[1,"row"],[1,"col-sm-12","col-md-10","pr-3"],["type","search","name","term","placeholder","Type sender's name",1,"mb-2",3,"ngModel","ngModelChange"],[1,"col"],["type","submit","value","Search",1,"btn","btn-sm","btn-primary","btn-full",3,"click"],["class","long-copy",4,"ngIf"],["class","row justify-content-center mt-4",4,"ngFor","ngForOf"],[1,"text-center"],["class","btn btn-secondary mt-2",3,"click",4,"ngIf"],[1,"long-copy"],[1,"row","justify-content-center","mt-4"],[1,"col-sm-12","col-md-10","col-lg-9"],[1,"list-group","pb-2"],[1,"list-group-item"],["type","submit",1,"btn","btn-sm","btn-full",3,"ngClass","value","click"],["deliverBtn",""],[1,"btn","btn-secondary","mt-2",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"h2"),i["\u0275\u0275text"](2,"Orders"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"form",2),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275elementStart"](8,"div",6),i["\u0275\u0275elementStart"](9,"input",7),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.query=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",8),i["\u0275\u0275elementStart"](11,"input",9),i["\u0275\u0275listener"]("click",(function(){return t.searchOrders()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,S,2,0,"div",10),i["\u0275\u0275template"](13,b,28,32,"div",11),i["\u0275\u0275elementStart"](14,"div",12),i["\u0275\u0275template"](15,y,2,0,"button",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngModel",t.query),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!(t.orders.length>0)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.orders),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.moreBtnActive))},directives:[s.r,s.i,s.j,s.b,s.h,s.k,r.NgIf,r.NgForOf,r.NgClass],pipes:[r.DatePipe],styles:[".section-admin[_ngcontent-%COMP%]{min-height:100vh;background-color:#f4f4f4}input[type=search][_ngcontent-%COMP%]{width:100%;padding:7px;border-radius:3px;border:1px solid #ccc}"]}),e})();function x(e){const t=e.get("password"),n=e.get("confirmPassword");return t.pristine||n.pristine?null:t&&n&&t.value!=n.value?{misMatch:!0}:null}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",19),i["\u0275\u0275text"](1,"Enter your name"),i["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",19),i["\u0275\u0275text"](1,"Enter a valid name"),i["\u0275\u0275elementEnd"]())}function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,w,2,0,"small",15),i["\u0275\u0275template"](2,I,2,0,"small",15),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.registerForm.get("name").errors?null:e.registerForm.get("name").errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.registerForm.get("name").errors?null:e.registerForm.get("name").errors.minlength)}}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",19),i["\u0275\u0275text"](1,"Email is required"),i["\u0275\u0275elementEnd"]())}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",19),i["\u0275\u0275text"](1,"Enter a valid email"),i["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,C,2,0,"small",15),i["\u0275\u0275template"](2,F,2,0,"small",15),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.registerForm.get("email").errors?null:e.registerForm.get("email").errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.registerForm.get("email").errors?null:e.registerForm.get("email").errors.pattern)}}function P(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",19),i["\u0275\u0275text"](1,"Password is required"),i["\u0275\u0275elementEnd"]())}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",19),i["\u0275\u0275text"](1,"Passwords do not match"),i["\u0275\u0275elementEnd"]())}let A=(()=>{class e{constructor(e,t,n,r){this.fb=e,this.authService=t,this.router=n,this.flashMessage=r,this.registerForm=this.fb.group({name:["",[s.p.required,s.p.minLength(3)]],email:["",[s.p.required,s.p.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)]],password:["",s.p.required],confirmPassword:["",s.p.required]},{validator:x})}ngOnInit(){}onRegisterSubmit(){if(this.registerForm.invalid)return this.flashMessage.show("Invalid info",{cssClass:"alert-danger",timeout:3e3});this.authService.adminRegister(this.registerForm.value).subscribe(e=>{if(!e.success)return this.flashMessage.show(e.msg,{cssClass:"alert-danger",timeout:3e3});this.flashMessage.show(e.msg,{cssClass:"alert-success",timeout:3e3}),this.router.navigate(["/admin"])},e=>(console.log("There was an error"),401===e.status&&this.flashMessage.show("Invalid info",{cssClass:"alert-danger",timeout:3e3})))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.c),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](o.f),i["\u0275\u0275directiveInject"](v.FlashMessagesService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-admin-register"]],decls:34,vars:5,consts:[["id","login"],[1,"container","my-5"],["id","login-row",1,"row","justify-content-center","align-items-center"],["id","login-column",1,"col-md-6"],["id","login-box",1,"col-md-12"],["id","login-form",1,"form",3,"formGroup","submit"],[1,"text-center","text-primary"],[1,"form-group"],["for","name",1,"text-primary"],["formControlName","name","type","text","name","name","id","name",1,"form-control"],[4,"ngIf"],["for","username",1,"text-primary"],["formControlName","email","type","email","name","email","id","email",1,"form-control"],["for","password",1,"text-primary"],["formControlName","password","type","password","name","password","id","password",1,"form-control"],["class","text-danger",4,"ngIf"],["for","confirmPassword",1,"text-primary"],["formControlName","confirmPassword","type","password","name","confirmPassword","id","confirmPassword",1,"form-control"],["type","submit","name","submit","value","Register",1,"btn","btn-full","btn-primary"],[1,"text-danger"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"form",5),i["\u0275\u0275listener"]("submit",(function(){return t.onRegisterSubmit()})),i["\u0275\u0275elementStart"](6,"h3",6),i["\u0275\u0275text"](7,"Admin Register"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",7),i["\u0275\u0275elementStart"](9,"label",8),i["\u0275\u0275text"](10,"Name:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](11,"br"),i["\u0275\u0275element"](12,"input",9),i["\u0275\u0275template"](13,M,3,2,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",7),i["\u0275\u0275elementStart"](15,"label",11),i["\u0275\u0275text"](16,"Email:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"br"),i["\u0275\u0275element"](18,"input",12),i["\u0275\u0275template"](19,j,3,2,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",7),i["\u0275\u0275elementStart"](21,"label",13),i["\u0275\u0275text"](22,"Password:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](23,"br"),i["\u0275\u0275element"](24,"input",14),i["\u0275\u0275template"](25,P,2,0,"small",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",7),i["\u0275\u0275elementStart"](27,"label",16),i["\u0275\u0275text"](28,"Confirm Password:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](29,"br"),i["\u0275\u0275element"](30,"input",17),i["\u0275\u0275template"](31,O,2,0,"small",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"div",7),i["\u0275\u0275element"](33,"input",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("formGroup",t.registerForm),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",t.registerForm.get("name").invalid&&t.registerForm.get("name").touched),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.registerForm.get("email").invalid&&t.registerForm.get("email").touched),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",(null==t.registerForm.get("password").errors?null:t.registerForm.get("password").errors.required)&&t.registerForm.get("password").touched),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",null==t.registerForm.errors?null:t.registerForm.errors.misMatch))},directives:[s.r,s.i,s.e,s.b,s.h,s.d,r.NgIf],styles:[".form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#ced4da}"]}),e})();function k(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",15),i["\u0275\u0275text"](1,"Enter a valid email"),i["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,k,2,0,"small",14),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.loginForm.get("email").errors?null:e.loginForm.get("email").errors.pattern)}}let N=(()=>{class e{constructor(e,t,n,r){this.fb=e,this.authService=t,this.router=n,this.flashMessage=r,this.loginForm=this.fb.group({email:["",[s.p.required,s.p.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)]],password:["",s.p.required]})}ngOnInit(){this.authService.loggedIn&&this.router.navigate(["/admin"])}onLoginSubmit(){if(this.loginForm.invalid)return this.flashMessage.show("Invalid email or password",{cssClass:"alert-danger",timeout:3e3});this.authService.adminLogin(this.loginForm.value).subscribe(e=>{if(e.success&&(localStorage.setItem("a_token",e.token),this.flashMessage.show("You are logged in",{cssClass:"alert-success mb-0",timeout:3e3}),this.router.navigate(["/admin"])),!e.success)return this.flashMessage.show(e.msg,{cssClass:"alert-danger",timeout:3e3})},e=>401===e.status&&this.flashMessage.show("An error occured",{cssClass:"alert-danger",timeout:3e3}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.c),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](o.f),i["\u0275\u0275directiveInject"](v.FlashMessagesService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-admin-login"]],decls:21,vars:2,consts:[["id","login"],[1,"container","my-5"],["id","login-row",1,"row","justify-content-center","align-items-center"],["id","login-column",1,"col-md-6"],["id","login-box",1,"col-md-12"],["id","login-form",1,"form",3,"formGroup","submit"],[1,"text-center","text-primary"],[1,"form-group"],["for","username",1,"text-primary"],["formControlName","email","type","email","name","email","id","email",1,"form-control"],[4,"ngIf"],["for","password",1,"text-primary"],["formControlName","password","type","password","name","password","id","password",1,"form-control"],["type","submit","name","submit","value","Login",1,"btn","btn-full","btn-primary"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"form",5),i["\u0275\u0275listener"]("submit",(function(){return t.onLoginSubmit()})),i["\u0275\u0275elementStart"](6,"h3",6),i["\u0275\u0275text"](7,"Admin Login"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",7),i["\u0275\u0275elementStart"](9,"label",8),i["\u0275\u0275text"](10,"Email:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](11,"br"),i["\u0275\u0275element"](12,"input",9),i["\u0275\u0275template"](13,q,2,1,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",7),i["\u0275\u0275elementStart"](15,"label",11),i["\u0275\u0275text"](16,"Password:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"br"),i["\u0275\u0275element"](18,"input",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",7),i["\u0275\u0275element"](20,"input",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("formGroup",t.loginForm),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",t.loginForm.get("email").invalid&&t.loginForm.get("email").touched))},directives:[s.r,s.i,s.e,s.b,s.h,s.d,r.NgIf],styles:[".form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#ced4da}"]}),e})();var R=n("Rpy1");const B=[{path:"",component:d,canActivate:[R.a]},{path:"messages",component:f,canActivate:[R.a]},{path:"orders",component:E,canActivate:[R.a]},{path:"login",component:N},{path:"register",component:A,canActivate:[R.a]},{path:"posts",loadChildren:()=>n.e(6).then(n.bind(null,"kahe")).then(e=>e.PostModule),canActivate:[R.a]}];let _=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.j.forChild(B)],o.j]}),e})(),D=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[R.a],imports:[[r.CommonModule,_,s.g,s.m,a]]}),e})()}}]);